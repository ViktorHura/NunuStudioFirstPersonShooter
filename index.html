<!DOCTYPE html>

<html>
	<head>
		<title></title>
		<meta http-equiv="content-type" content="text/html; charset=ISO-8859-1"/>
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
		
		<div id="HUD"style="position:absolute; visibility:hidden">
		
		<span id="dialog"  style="position:absolute;font-size:150%;width: 400px;color: brown;"></span>
		<img src="images/Dialog.png" id="dialogBg" style="position:absolute;"	>
		<span id="health"  style="position:absolute;font-size:200%;width: 300px;color: Green;">100%</span>
		<span id="ammo"  style="position:absolute;font-size:200%;width: 300px;color: Blue;">30/30</span>
		<img src="images/Status.png" id="Status" style="position:absolute;">
		<img src="images/Crosshair.png" id="Crosshair" style="position:absolute;">
		
		
		
		</div>
		
<style type="text/css">
body {
    overflow:hidden;
}
</style>
		
		
		
	</head>

	<body style="background-color: #222222" onload="run();" onresize="resize();" oncontextmenu="return false;">
		<!--nunuStudio lib-->
		<script type="text/javascript" src="nunu.min.js"></script>
		

		<!--App code-->
		<script type="text/javascript">
			var app;
			var hp = 100;
			var magazineamount;
			var magazinesize;
			var ammotxt;

			//Initialize app
			function run()
			{	
				//Create app object
				app = new NunuApp();

				//Onload enable the vr and fullscreen buttons
				var logo = document.getElementById("logo");
				var onLoad = function()
				{
					var button = document.getElementById("fullscreen");
					button.style.visibility = "visible";
					document.getElementById('HUD').style.visibility = "visible";
					
					magazineamount = app.program.magazineamount;
			        magazinesize = app.program.magazinesize;
					ammotxt = magazineamount + "/" + magazinesize;
			        console.log(ammotxt);

					//Check if VR is available
					if(app.vrAvailable())
					{
						//If there are displays available add button
						Nunu.getVRDisplays(function(display)
						{
							button = document.getElementById("vr");
							button.style.visibility = "visible";
						});
					}

					//Remove logo and loading bar
					document.body.removeChild(logo);
				};

				//On progress callback
				var bar = document.getElementById("bar");
				var onProgress = function(event)
				{
					if(event.lengthComputable)
					{
						var progress = event.loaded / event.total * 100;
						bar.style.width = progress + "%";
					}
				};

				//Load and run nunu app
				app.loadRunProgram("app.nsp", onLoad, onProgress);
			}

			//Resize nunu app (must be called every time the window is resized)
			function resize()
			{
				app.resize();
			}

			//Toggle fullscreen mode
			function toggleFullscreen()
			{
				app.setFullscreen();
			}

			//Toggle VR mode
			function toggleVR()
			{
				app.toggleVR();
			}
			
			var loop = setInterval(function(){
			
			if (app.program.playerdeath == true){
			
			app.exit();
			setTimeout(function(){ window.open('GameOver.html','_self',false); },1000);
			
			
			
			}
			
			
			
			},1);
			
			
		</script>

		<!--Fullscreen button-->
		<div id="fullscreen" onclick="toggleFullscreen();" style="visibility:hidden; position:absolute; z-index:10000; right:30px; bottom:30px">
			<img style="position:absolute; cursor:pointer; opacity:0.4; width:25px; height:25px" src="fullscreen.png" onmouseenter="this.style.opacity = 1.0;" onmouseleave="this.style.opacity=0.4;"></img>
		</div>
		<!--VR button-->
		<div id="vr" onclick="toggleVR();" style="visibility:hidden; position:absolute; z-index:10000; right:70px; bottom:30px">
			<img style="position:absolute; cursor:pointer; opacity:0.4; width:25px; height:25px" src="vr.png" onmouseenter="this.style.opacity = 1.0;" onmouseleave="this.style.opacity=0.4;"></img>
		</div>
		<!--Logo-->
		<div id="logo" style="position:absolute; width:50%; left:25%; top:35%">
			<img src="logo.png" style="width:25%;"></img>
			
			<!--Loading bar-->
			<div style="position:absolute; width:100%; height:7%; left:0%; top:120%; border-style:solid; border-color:#FFFFFF; border-width:2px">
				<div id="bar" style="position:absolute; width:0%; height:100%; left:0%; top:0%; background-color:#FFFFFF">
			</div>
		</div>
		
		
		
		<script type="text/javascript" src="Hud.js"></script>
		
	</body>
</html>
